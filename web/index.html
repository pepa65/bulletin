<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>CRICS Bulletin</title>
<meta name="abstract" content="index.html">
<meta name="copyright" content="CRICS">
<meta name="date" content="2020-09-21">
<meta name="reply-to" content="itteam@crics.asia">
<link rel="icon" href="logo.svg">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="medium/css/medium-editor.min.css">
<link rel="stylesheet" href="medium/css/themes/beagle.min.css">
<link rel="stylesheet" href="medium/css/medium-editor-tables.min.css">
<div class="banner">
 <img class="logo" src="logo.svg" width="100px">
 <p class="title">CRICS Bulletin
 <p class="aqi">AQI <span id="aqi">1</span>
</div>
<div class="page">
 <div class="editable"></div>
</div>
<script src="medium/js/medium-editor.min.js"></script>
<script src="medium/js/medium-editor-tables.min.js"></script>
<script>
var editor = new MediumEditor('.editable', {
	buttonLabels: false,
	activeButtonClass: 'medium-editor-button-active',
	delay: 0,
	toolbar: {
		buttons: ['removeFormat', 'bold', 'italic', 'underline', 'strikethrough',
			'pre', 'superscript', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
			'unorderedlist', 'orderedlist', 'table'],
		autoLink: false,
	},
	paste: {
		forcePlainText: false,
	},
	extensions: {
		table: new MediumEditorTable()
	},
});
setInterval(function(){ // Save content every 5 seconds
	content = editor.getContent();
	if(content.length){localStorage.setItem('html', content);}
	else{editor.setContent(localStorage.getItem('html'));}
}, 5000);
setInterval(function(){ // Get AQI every 5 minutes
	fetch('aqi.txt')
		.then(resp => resp.text())
		.then(text => document.getElementById('aqi').innerHTML = text)
	fetch('bg.txt')
		.then(resp => resp.text())
		.then(text => document.getElementById('aqi').style.backgroundColor = text)
}, 300000);
</script>
